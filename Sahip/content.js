(function(){
if (typeof globalThis.browser === "undefined" && typeof chrome !== "undefined") {
	globalThis.browser = chrome;
}
if (globalThis.browser && !globalThis.browser.action && globalThis.browser.browserAction) {
	globalThis.browser.action = globalThis.browser.browserAction;
}
})();
function n(e,t){for(var r=new Y(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new _(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)a[i]=i-r[n]<<5|n;return{b:r,r:a}}var W=Uint8Array,Y=Uint16Array,_=Int32Array,K=new W([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),X=new W([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),U=new W([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),e=n(K,2),ne=e.b,G=e.r,e=(ne[28]=258,G[258]=28,n(X,0)),ae=e.b,ie=e.r,h=new Y(32768);for(r=0;r<32768;++r)h[r]=((65280&(t=(61680&(t=(52428&(t=(43690&r)>>1|(21845&r)<<1))>>2|(13107&t)<<2))>>4|(3855&t)<<4))>>8|(255&t)<<8)>>1;var t,J=function(e,t,r){for(var n=e.length,a=0,i=new Y(t);a<n;++a)e[a]&&++i[e[a]-1];var l=new Y(t);for(a=1;a<t;++a)l[a]=l[a-1]+i[a-1]<<1;if(r){for(var o=new Y(1<<t),c=15-t,a=0;a<n;++a)if(e[a])for(var d=a<<4|e[a],s=t-e[a],u=l[e[a]-1]++<<s,f=u|(1<<s)-1;u<=f;++u)o[h[u]>>c]=d}else for(o=new Y(n),a=0;a<n;++a)e[a]&&(o[a]=h[l[e[a]-1]++]>>15-e[a]);return o},H=new W(288);for(r=0;r<144;++r)H[r]=8;for(r=144;r<256;++r)H[r]=9;for(r=256;r<280;++r)H[r]=7;for(r=280;r<288;++r)H[r]=8;var R=new W(32);for(r=0;r<32;++r)R[r]=5;function i(e,t,r,n){var a=e.length,H=n?n.length:0;if(!a||t.f&&!t.l)return r||new W(0);function i(e){var t=r.length;t<e&&((t=new W(Math.max(2*t,e))).set(r),r=t)}var l=!r,o=l||2!=t.i,c=t.i,d=(l&&(r=new W(3*a)),t.f||0),s=t.p||0,u=t.b||0,f=t.l,h=t.d,m=t.m,p=t.n,y=8*a;do{if(!f){var d=Q(e,s,1),g=Q(e,s+1,3);if(s+=3,!g){var v=e[(A=ee(s)+4)-4]|e[A-3]<<8,b=A+v;if(a<b){c&&re(0);break}o&&i(u+v),r.set(e.subarray(A,b),u),t.b=u+=v,t.p=s=8*b,t.f=d;continue}if(1==g)f=de,h=ue,m=9,p=5;else if(2==g){var v=Q(e,s,31)+257,x=Q(e,s+10,15)+4,C=v+Q(e,s+5,31)+1;s+=14;for(var S=new W(C),w=new W(19),T=0;T<x;++T)w[U[T]]=Q(e,s+3*T,7);s+=3*x;for(var b=Z(w),R=(1<<b)-1,z=J(w,b,1),T=0;T<C;){var A,M=z[Q(e,s,R)];if(s+=15&M,(A=M>>4)<16)S[T++]=A;else{var E=0,O=0;for(16==A?(O=3+Q(e,s,3),s+=2,E=S[T-1]):17==A?(O=3+Q(e,s,7),s+=3):18==A&&(O=11+Q(e,s,127),s+=7);O--;)S[T++]=E}}var g=S.subarray(0,v),k=S.subarray(v),m=Z(g),p=Z(k),f=J(g,m,1),h=J(k,p,1)}else re(1);if(y<s){c&&re(0);break}}o&&i(u+131072);for(var I=(1<<m)-1,j=(1<<p)-1,q=s;;q=s){var D=(E=f[$(e,s)&I])>>4;if(y<(s+=15&E)){c&&re(0);break}if(E||re(2),D<256)r[u++]=D;else{if(256==D){q=s,f=null;break}var L,F=D-254,D=(264<D&&(L=K[T=D-257],F=Q(e,s,(1<<L)-1)+ne[T],s+=L),h[$(e,s)&j]),N=D>>4,k=(D||re(3),s+=15&D,ae[N]);if(3<N&&(L=X[N],k+=$(e,s)&(1<<L)-1,s+=L),y<s){c&&re(0);break}o&&i(u+131072);var B=u+F;if(u<k){var P=H-k,V=Math.min(k,B);for(P+u<0&&re(3);u<V;++u)r[u]=n[P+u]}for(;u<B;++u)r[u]=r[u-k]}}t.l=f,t.p=q,t.b=u,t.f=d,f&&(d=1,t.m=m,t.d=h,t.n=p)}while(!d);return u!=r.length&&l?te(r,0,u):r.subarray(0,u)}function z(e,t,r){var n=t/8|0;e[n]|=r<<=7&t,e[1+n]|=r>>8}function I(e,t,r){var n=t/8|0;e[n]|=r<<=7&t,e[1+n]|=r>>8,e[2+n]|=r>>16}function j(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,i=r.slice();if(!a)return{t:S,l:0};if(1==a)return(p=new W(r[0].s+1))[r[0].s]=1,{t:p,l:1};r.sort(function(e,t){return e.f-t.f}),r.push({s:-1,f:25001});var l=r[0],o=r[1],c=0,d=1,s=2;for(r[0]={s:-1,f:l.f+o.f,l:l,r:o};d!=a-1;)l=r[r[c].f<r[s].f?c++:s++],o=r[c!=d&&r[c].f<r[s].f?c++:s++],r[d++]={s:-1,f:l.f+o.f,l:l,r:o};for(var u=i[0].s,n=1;n<a;++n)i[n].s>u&&(u=i[n].s);var f=new Y(u+1),h=x(r[d-1],f,0);if(t<h){var n=0,m=0,p=h-t,y=1<<p;for(i.sort(function(e,t){return f[t.s]-f[e.s]||e.f-t.f});n<a;++n){var g=i[n].s;if(!(f[g]>t))break;m+=y-(1<<h-f[g]),f[g]=t}for(m>>=p;0<m;){var v=i[n].s;f[v]<t?m-=1<<t-f[v]++-1:++n}for(;0<=n&&m;--n){var b=i[n].s;f[b]==t&&(--f[b],++m)}h=t}return{t:new W(f),l:h}}function V(e){for(var t=e.length;t&&!e[--t];);function r(e){n[a++]=e}for(var n=new Y(++t),a=0,i=e[0],l=1,o=1;o<=t;++o)if(e[o]==i&&o!=t)++l;else{if(!i&&2<l){for(;138<l;l-=138)r(32754);2<l&&(r(10<l?l-11<<5|28690:l-3<<5|12305),l=0)}else if(3<l){for(r(i),--l;6<l;l-=6)r(8304);2<l&&(r(l-3<<5|8208),l=0)}for(;l--;)r(i);l=1,i=e[o]}return{c:n.subarray(0,a),n:t}}function P(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r}function le(e,t,r){var n=r.length,a=ee(t+2);e[a]=255&n,e[a+1]=n>>8,e[a+2]=255^e[a],e[a+3]=255^e[a+1];for(var i=0;i<n;++i)e[a+i+4]=r[i];return 8*(a+4+n)}function oe(e,t,r,n,a,i,l,o,c,d,s){z(t,s++,r),++a[256];for(var u=(r=j(a,15)).t,r=r.l,f=(h=j(i,15)).t,h=h.l,m=(p=V(u)).c,p=p.n,y=(g=V(f)).c,g=g.n,v=new Y(19),b=0;b<m.length;++b)++v[31&m[b]];for(b=0;b<y.length;++b)++v[31&y[b]];for(var x=(C=j(v,7)).t,C=C.l,S=19;4<S&&!x[U[S-1]];--S);var w=d+5<<3,T=P(a,H)+P(i,R)+l,a=P(a,u)+P(i,f)+l+14+3*S+P(v,x)+2*v[16]+3*v[17]+7*v[18];if(0<=c&&w<=T&&w<=a)return le(t,s,e.subarray(c,c+d));if(z(t,s,1+(a<T)),s+=2,a<T){var A=J(u,r,0),M=u,E=J(f,h,0),O=f,k=J(x,C,0);z(t,s,p-257),z(t,s+5,g-1),z(t,s+10,S-4),s+=14;for(b=0;b<S;++b)z(t,s+3*b,x[U[b]]);s+=3*S;for(var q=[m,y],D=0;D<2;++D)for(var L=q[D],b=0;b<L.length;++b){var F=31&L[b];z(t,s,k[F]),s+=x[F],15<F&&(z(t,s,L[b]>>5&127),s+=L[b]>>12)}}else A=ce,M=H,E=se,O=R;for(b=0;b<o;++b){var N,B=n[b];255<B?(I(t,s,A[(F=B>>18&31)+257]),s+=M[F+257],7<F&&(z(t,s,B>>23&31),s+=K[F]),I(t,s,E[N=31&B]),s+=O[N],3<N&&(I(t,s,B>>5&8191),s+=X[N])):(I(t,s,A[B]),s+=M[B])}return I(t,s,A[256]),s+M[256]}function y(t,e,r,n,a,i){var l=i.z||t.length,o=new W(n+l+5*(1+Math.ceil(l/7e3))+a),c=o.subarray(n,o.length-a),d=i.l,s=7&(i.r||0);if(e){s&&(c[0]=i.r>>3);function u(e){return(t[e]^t[e+1]<<p^t[e+2]<<z)&f}for(var e=fe[e-1],H=e>>13,R=8191&e,f=(1<<r)-1,h=i.p||new Y(32768),m=i.h||new Y(1+f),p=Math.ceil(r/3),z=2*p,y=new _(25e3),g=new Y(288),v=new Y(32),b=0,x=0,C=i.i||0,S=0,w=i.w||0,T=0;C+2<l;++C){var A=u(C),M=32767&C,E=m[A];if(h[M]=E,m[A]=M,w<=C){var O=l-C;if((7e3<b||24576<S)&&(423<O||!d)){for(var s=oe(t,c,0,y,g,v,x,S,T,C-T,s),S=b=x=0,T=C,k=0;k<286;++k)g[k]=0;for(k=0;k<30;++k)v[k]=0}var q=2,D=0,I=R,L=M-E&32767;if(2<O&&A==u(C-L))for(var j=Math.min(H,O)-1,P=Math.min(32767,C),V=Math.min(258,O);L<=P&&--I&&M!=E;){if(t[C+q]==t[C+q-L]){for(var F=0;F<V&&t[C+F]==t[C+F-L];++F);if(q<F){if(D=L,j<(q=F))break;for(var U=Math.min(L,F-2),J=0,k=0;k<U;++k){var N=C-L+k&32767,Z=N-h[N]&32767;J<Z&&(J=Z,E=N)}}}L+=(M=E)-(E=h[M])&32767}D?(y[S++]=268435456|G[q]<<18|ie[D],A=31&G[q],O=31&ie[D],x+=K[A]+X[O],++g[257+A],++v[O],w=C+q,++b):(y[S++]=t[C],++g[t[C]])}}for(C=Math.max(C,w);C<l;++C)y[S++]=t[C],++g[t[C]];s=oe(t,c,d,y,g,v,x,S,T,C-T,s),d||(i.r=7&s|c[s/8|0]<<3,s-=7,i.h=m,i.p=h,i.i=C,i.w=w)}else{for(C=i.w||0;C<l+d;C+=65535){var B=C+65535;l<=B&&(c[s/8|0]=d,B=l),s=le(c,s+1,t.subarray(C,B))}i.i=l}return te(o,0,n+ee(s)+a)}function g(e){31==e[0]&&139==e[1]&&8==e[2]||re(6,"invalid gzip data");var t=e[3],r=10;4&t&&(r+=2+(e[10]|e[11]<<8));for(var n=(t>>3&1)+(t>>4&1);0<n;n-=!e[r++]);return r+(2&t)}function v(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function b(e,t){return(8!=(15&e[0])||7<e[0]>>4||(e[0]<<8|e[1])%31)&&re(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&re(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),2+(e[1]>>3&4)}var r,ce=J(H,9,0),de=J(H,9,1),se=J(R,5,0),ue=J(R,5,1),Z=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Q=function(e,t,r){var n=t/8|0;return(e[n]|e[1+n]<<8)>>(7&t)&r},$=function(e,t){var r=t/8|0;return(e[r]|e[1+r]<<8|e[2+r]<<16)>>(7&t)},ee=function(e){return(e+7)/8|0},te=function(e,t,r){return(null==r||r>e.length)&&(r=e.length),new W(e.subarray(t=null==t||t<0?0:t,r))},C=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],re=function(e,t,r){t=new Error(t||C[e]);if(t.code=e,Error.captureStackTrace&&Error.captureStackTrace(t,re),r)return t;throw t},x=function(e,t,r){return-1==e.s?Math.max(x(e.l,t,r+1),x(e.r,t,r+1)):t[e.s]=r},fe=new _([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),S=new W(0),w=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var r=t,n=9;--n;)r=(1&r&&-306674912)^r>>>1;e[t]=r}return e}(),T=function(){var n=-1;return{p:function(e){for(var t=n,r=0;r<e.length;++r)t=w[255&t^e[r]]^t>>>8;n=t},d:function(){return~n}}},A=function(e,t,r,n,a){var i,l;return!a&&(a={l:1},t.dictionary)&&(i=t.dictionary.subarray(-32768),(l=new W(i.length+e.length)).set(i),l.set(e,i.length),e=l,a.w=i.length),y(e,null==t.level?6:t.level,null==t.mem?a.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,r,n,a)},l=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},M=function(e,t){var r=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&l(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),r){e[3]=8;for(var n=0;n<=r.length;++n)e[n+10]=r.charCodeAt(n)}},E=function(e){return 10+(e.filename?e.filename.length+1:0)};function O(e,t){return 31==e[0]&&139==e[1]&&8==e[2]?(n=t,(a=g(r=e))+8>r.length&&re(6,"invalid gzip data"),i(r.subarray(a,-8),{i:2},n&&n.out||new W(v(r)),n&&n.dictionary)):8!=(15&e[0])||7<e[0]>>4||(e[0]<<8|e[1])%31?i(e,{i:2},(a=t)&&a.out,a&&a.dictionary):(r=t,i(e.subarray(b(e,r&&r.dictionary),-4),{i:2},r&&r.out,r&&r.dictionary));var r,n,a}var k=typeof TextEncoder<"u"&&new TextEncoder,o=typeof TextDecoder<"u"&&new TextDecoder;try{o.decode(S,{stream:!0})}catch{}var c,q=function(e){for(var t="",r=0;;){var n=e[r++],a=(127<n)+(223<n)+(239<n);if(r+a>e.length)return{s:t,r:te(e,r-1)};a?3==a?(n=((15&n)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536,t+=String.fromCharCode(55296|n>>10,56320|1023&n)):t+=1&a?String.fromCharCode((31&n)<<6|63&e[r++]):String.fromCharCode((15&n)<<12|(63&e[r++])<<6|63&e[r++]):t+=String.fromCharCode(n)}};function D(e,t){if(t){for(var r=new W(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}if(k)return k.encode(e);function a(e){l[o++]=e}for(var i=e.length,l=new W(e.length+(e.length>>1)),o=0,n=0;n<i;++n){o+5>l.length&&((c=new W(o+8+(i-n<<1))).set(l),l=c);var c=e.charCodeAt(n);c<128||t?a(c):(c<2048?a(192|c>>6):(55295<c&&c<57344?(a(240|(c=65536+(1047552&c)|1023&e.charCodeAt(++n))>>18),a(128|c>>12&63)):a(224|c>>12),a(128|c>>6&63)),a(128|63&c))}return te(l,0,o)}function L(){var e=document.querySelector("div.search-result-bc").querySelectorAll(".bc-item");return 2<=e.length&&!(e[0].innerText.includes("Alışveriş")||e[1].innerText.includes("Alışveriş")||e[1].innerText.includes("Cep"))&&(e[0].innerText.includes("Vasıta")||e[0].innerText.includes("Emlak")||e[1].innerText.includes("Vasıta")||e[1].innerText.includes("Emlak"))}browser.runtime.onMessage.addListener(function(e,t,r){"reloadPage"===e.action&&window.location.reload()}),browser.storage.local.get("email",function(e){c=e.email||""});var d,s,u,F,a="https://gecmisi.com.tr",N=browser.runtime.getManifest().version;function f(e){let t=Date.parse((new Date).toUTCString()),r=parseInt(t,10).toString().slice(0,5),n=encodeURIComponent(e),a=t.toString().padEnd(13,"0")+n;return Array.from(a,(e,t)=>String.fromCharCode(e.charCodeAt(0)^r.charCodeAt(t%r.length))).join("")}function m(e){return e=D(e),t=(t={level:1,mem:12})||{},r=T(),n=e.length,r.p(e),a=(e=A(e,t,E(t),8)).length,M(e,t),l(e,a-8,r.d()),l(e,a-4,n),e;var t,r,n,a}function B(e){var t,r=O(e),e=void 0;if(e){for(var n="",a=0;a<r.length;a+=16384)n+=String.fromCharCode.apply(null,r.subarray(a,a+16384));return n}return o?o.decode(r):(t=(e=q(r)).s,(n=e.r).length&&re(8),t)}function he(e){var t=[],e=(e?(new DOMParser).parseFromString(e,"text/html"):document).querySelectorAll(".searchResultsItem:not(.searchResultsPromoSuper):not(.nativeAd)");if(0!==e.length)for(var r of e)try{var n=r.getAttribute("data-id"),a=[...r.querySelectorAll(".searchResultsPriceValue span")].find(e=>e.innerText.includes("TL")).innerText.trim().replace(/[^\d]/g,"");t.push({ilanNoInsert:n,f:a})}catch{continue}else for(var r of document.querySelectorAll(".search-result-item:not(.classicNativeAd)"))try{n=r.getAttribute("data-id"),a=[...r.querySelectorAll(".item-price span")].find(e=>e.innerText.includes("TL")).innerText.trim().replace(/[^\d]/g,"");t.push({ilanNoInsert:n,f:a})}catch{continue}if(void 0!==(t={info:{version:N,email:c,uuid:F},ilanlar:t}).ilanlar&&0!==Object.keys(t.ilanlar).length)return JSON.stringify(t,null,2)}function me(e){var n=e.data.reduce(function(e,t){return e[t.id]||(e[t.id]=[]),e[t.id].push(t),e},{});return Object.keys(n).map(function(e){var t=n[e],r=parseFloat(t[0].price);return{id:e,yuzdeselDegisim:((parseFloat(t[t.length-1].price)-r)/r*100).toFixed(0)}})}function pe(){var e,t=document.querySelectorAll(".searchResultsItem:not(.searchResultsPromoSuper):not(.nativeAd) > td.searchResultsPriceValue");(e=document.createElement("div")).className="lightbox",e.style.position="absolute",e.style.zIndex="2147483647",document.body.appendChild(e);let a=e;t.forEach(n=>{n.addEventListener("mouseenter",function(){let t=n.closest("tr").getAttribute("data-id");try{var e,r;t&&(e={message:"ok",data:d.data.filter(function(e){return e.id===parseInt(t)})},a.innerHTML="",a.appendChild(xe(e)),a.style.display="block",r=n.getBoundingClientRect(),a.style.left=r.left+window.scrollX+"px",a.style.top=r.bottom+window.scrollY+5+"px")}catch{}}),n.addEventListener("mousemove",function(e){a.style.left=e.pageX+10+"px",a.style.top=e.pageY+10+"px"}),n.addEventListener("mouseleave",function(){a.style.display="none"})})}function ye(){var t;for(t of document.querySelectorAll(".searchResultsItem:not(.searchResultsPromoSuper):not(.nativeAd)")){var r=s.find(e=>e.id===t.getAttribute("data-id"));try{{var n=t.querySelector("td.searchResultsPriceValue"),a=document.createElement("div"),i=(a.style.cursor="pointer",a.classList.add("action"),a.style.textAlign="center",document.createElement("p")),l=0<parseFloat(r.yuzdeselDegisim)?"green":parseFloat(r.yuzdeselDegisim)<0?"red":"",o=(i.style.backgroundColor=l,i.style.borderRadius="0px",i.style.color="white",i.style.opacity="0.4",i.style.fontWeight="bold",i.style.marginBlock="0",i.style.marginTop="-14px",i.style.display="flex",i.style.justifyContent="space-around",i.innerHTML=r.yuzdeselDegisim+"%",t.querySelector("span"));a.appendChild(i),a.appendChild(o),n.firstChild?n.insertBefore(a,n.firstChild):n.appendChild(a),n.style.cursor="pointer",n.classList.add("action");let e=t.getAttribute("data-id");n.addEventListener("click",()=>{window.open("https://gecmisi.com.tr/sorgu.html?ilanNo="+e,"_blank")})}}catch{continue}}}function ge(){var t;for(t of document.querySelectorAll(".search-result-item:not(.classicNativeAd)")){var e,r,n,a,i,l=s.find(e=>e.id===t.getAttribute("data-id"));try{"0"!==l.yuzdeselDegisim&&(e=t.querySelector("a > div.item-price"),(r=document.createElement("div")).classList.add(u,"ignore-me","hidden"),n=document.createElement("p"),a=0<parseFloat(l.yuzdeselDegisim)?"green":parseFloat(l.yuzdeselDegisim)<0?"red":"",n.style.backgroundColor=a,n.style.borderRadius="0px",n.style.color="white",n.style.opacity="0.4",n.style.fontWeight="bold",n.style.marginBlock="0",n.style.marginBottom="-2px",n.style.padding="2px",n.style.maxWidth="fit-content",n.style.display="inline-block",n.innerHTML=l.yuzdeselDegisim+"%",i=t.querySelector("span"),r.appendChild(n),r.appendChild(i),e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r))}catch{continue}}}function ve(){try{var e=document.querySelector("div.search-result-bc").querySelectorAll(".bc-item");if(e[0].innerText.includes("Anasayfa")&&e[1].innerText.includes("Vasıta")&&e[2].innerText.includes("Otomobil")){var d=document.querySelectorAll("thead tr td");if(d.length){var t=document.querySelectorAll(".searchResultsItem:not(.searchResultsPromoSuper):not(.nativeAd)"),s=[];if(t.forEach(function(e,t){var r=e.querySelectorAll("td"),n={};if(d.length<=r.length){e=e.getAttribute("data-id");n.ilanNoAllData=e;for(var a=0;a<d.length;a++){var i,l,o=d[a].innerText.trim(),c=r[a].innerText.trim();o.includes("/")?(i=o.split("/"),l=c.split("\n"),i.forEach((e,t)=>{void 0!==l[t]&&(n[e.trim()]=l[t].trim())})):""!==c&&""!==o&&(n[o]=c.replace(/\n/g," "))}(categoryValues=function(){var e,t=document.querySelector("div.search-result-bc").querySelectorAll(".bc-item"),r={};if(t[0].innerText.includes("Anasayfa")&&t[1].innerText.includes("Vasıta")&&t[2].innerText.includes("Otomobil")){for(var n,a=["cat1","cat2","Marka","Seri","Model","subModel1","subModel2","subModel3"],i=1;i<t.length;i++)r[a[i-1]]=(e=(e=t[i]).querySelector("a"))?e.getAttribute("title"):null;r.Model&&(r.subModel0=r.Model,n=[r.Model,r.subModel1,r.subModel2,r.subModel3].filter(Boolean),r.Model=n.join(" "))}return r}()).Model&&n.Model&&(categoryValues.Model.length>=n.Model.length?delete n.Model:delete categoryValues.Model);e={...n,...categoryValues};s.push(e)}}),void 0!==(json=s)&&0!==Object.keys(json).length)return JSON.stringify(json,null,2)}}}catch{}}function p(e,t){return(e=e&&e.querySelector(t))?e.innerText.trim():null}function be(e,t,r){return(e=e&&e.querySelector(t))?e.getAttribute(r).trim():null}document.addEventListener("DOMContentLoaded",function(){if(L()){try{browser.storage.local.get("buttonFiyatM2OnOff",function(e){e.buttonFiyatM2OnOff&&Ce()});var e=he(),t=(e&&fetch(a+"/apiv3/im",{method:"POST",headers:{"Content-Type":"application/octet-stream"},body:f(m(e))}).then(async e=>{e.ok;e=await e.arrayBuffer(),e=B(new Uint8Array(e));return JSON.parse(e)}).then(t=>{s=me(d=t),browser.storage.local.get("buttonHistoryChangeOnOff",function(e){(void 0===e.buttonHistoryChangeOnOff||e.buttonHistoryChangeOnOff)&&ye()}),browser.storage.local.get("buttonHistoryOnOff",function(e){(void 0===e.buttonHistoryOnOff||e.buttonHistoryOnOff)&&(ge(),pe(),document.body.insertAdjacentHTML("afterbegin",t.script_data),Array.from(document.querySelectorAll("."+u+".ignore-me.hidden")).forEach(e=>e.classList.remove("hidden")))})}).catch(e=>{}),ve()),r=(t&&fetch(a+"/api/bm",{method:"POST",headers:{"Content-Type":"application/octet-stream"},body:f(m(t))}).then(e=>e.json()).then(e=>{}).catch(e=>{}),function(){try{var e=document.querySelector("#classifiedId").innerText.trim(),t=(document.querySelector(".classified-title").innerText.trim(),document.querySelector("#favoriteClassifiedPrice").getAttribute("value").trim().replace(/[^\d]/g,"")),r=[];if(r.push({ilanNoInsert:e,f:t}),void 0!==(r={info:{version:N,email:c,uuid:F},ilanlar:r}).ilanlar&&0!==Object.keys(r.ilanlar).length)return JSON.stringify(r,null,2)}catch{}}()),n=(r&&fetch(a+"/api/is",{method:"POST",headers:{"Content-Type":"application/octet-stream"},body:f(m(r))}).then(e=>e.json()).then(e=>{e="string"==typeof e?JSON.parse(function(e){let t=Date.parse((new Date).toUTCString()),r=parseInt(t,10).toString().slice(0,5),n=Array.from(e,(e,t)=>String.fromCharCode(e.charCodeAt(0)^r.charCodeAt(t%r.length))).join(""),a=(n.slice(0,13),n.slice(13));return decodeURIComponent(a)}(e)):e;try{var t=document.createElement("div");(document.querySelector("#classifiedDetail > div > div.classifiedDetailContent > div.classifiedOtherBoxes > div.classifiedOtherBoxesContainer > div.classifiedUserBox")||document.querySelector("#classifiedDetail > div > div.classifiedDetailContent > div.classifiedOtherBoxes > div.classifiedOtherBoxesContainer > div.user-info-module")||document.querySelector("#classifiedDetail > div > div.classifiedDetailContent > div.classifiedOtherBoxes > div.classifiedOtherBoxesContainer > div.project-classified-user-box")||document.querySelector("#classifiedDetail > div > div.classifiedDetailContent > div.classifiedOtherBoxes > div.classifiedOtherBoxesContainer")).insertAdjacentElement("afterend",t),t.style.overflow="hidden",t.style.height="0",t.style.opacity="0",t.appendChild(xe(e)),t.style.height=t.scrollHeight+"px",t.style.opacity="1"}catch{}try{t=document.createElement("div");document.querySelector("body > div.main-content > div.ng-scope > div.content > div.info-section > ul > li:nth-child(1)").insertAdjacentElement("afterbegin",t),t.style.overflow="hidden",t.style.marginTop="3px",t.style.height="0",t.style.opacity="0",t.appendChild(function(i){var e=document.createElement("div"),t=(e.className=Math.random().toString(36).replace(/[^a-zA-Z]/g,""),e.style.position="relative",document.createElement("div")),r=(t.className=Math.random().toString(36).replace(/[^a-zA-Z]/g,""),t.style.border="1px solid #dbdbdb",t.style.padding="3px",t.style.color="#333",t.style.marginBottom="12px",document.createElement("div")),n=(r.className=Math.random().toString(36).replace(/[^a-zA-Z]/g,""),r.style.overflow="auto",document.createElement("table")),a=(n.style.width="100%",n.style.borderCollapse="collapse",n.style.boxShadow="1px 2px 3px #000",document.createElement("thead")),l=(a.classList.add(Math.random().toString(36).replace(/[^a-zA-Z]/g,"")),a.style.backgroundColor="#efefef",a.style.background="-webkit-linear-gradient(top, #ddd 0, #eee 100%)",a.style.padding="10px",document.createElement("tr")),o=(l.innerHTML="<th style='padding: 0px; font-weight: bold; text-align: center'>Fiyat</th><th style='padding: 0px; font-weight: bold; text-align: center'>Tarih</th>",a.appendChild(l),n.appendChild(a),document.createElement("tbody"));i.data.forEach((e,t)=>{var r=document.createElement("tr"),n=parseFloat(e.price).toLocaleString("tr-TR",{minimumFractionDigits:0,maximumFractionDigits:2}),a=new Date(e.date).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"});t===i.data.length-1&&0<t&&i.data[t-1].price===e.price||(r.innerHTML="<td style='padding: 0px; text-align: center'>"+n+" TL</td><td style='padding: 0px; text-align: center'>"+a+"</td>",r.style.backgroundColor=t%2==1?"#f5f5f5":"#efefef",o.appendChild(r))}),0==i.data.length&&((l=document.createElement("tr")).innerHTML="<td style='padding: 4px 1px; text-align: center; border-left: 1px solid #fff; white-space: nowrap;' colspan=\"2\">Fiyat geçmişi mevcut değil</td>",l.style.backgroundColor="#efefef",o.appendChild(l));return n.appendChild(o),r.appendChild(n),t.appendChild(r),e.appendChild(t),e}(e)),t.style.height=t.scrollHeight+"px",t.style.opacity="1"}catch{}}).catch(e=>{}),function(){try{var e,t,r,n=document.querySelector("#classifiedDetail > div > div.classifiedDetailContent > div.classifiedInfo"),a=document.querySelector("#container > div.search-result-bc > ul");return n&&a?(e=a.querySelectorAll("li.bc-item"))[0].innerText.includes("Vasıta")&&e[1].innerText.includes("Otomobil")?(t=function(){var e=document.querySelector("#gaPageViewTrackingData").innerHTML.match(/var pageTrackData = (.*);/);if(e&&1<e.length){e=JSON.parse(e[1]);if(e.customVars)return e.customVars}}(),r={ilanNoAllData:be(document,"#classifiedId","data-classifiedid"),"İlan Başlığı":p(document,".classified-title"),"Yıl":p(n,"ul > li:nth-child(6) > span"),KM:p(n,"ul > li:nth-child(10) > span"),Renk:p(n,"ul > li:nth-child(15) > span"),Fiyat:be(document,"#favoriteClassifiedPrice","value"),"İlan Tarihi":p(n,"ul > li:nth-child(2) > span"),"İl":p(n,"h2 > a:nth-child(1)"),"İlçe":p(n,"h2 > a:nth-child(3)"),Semt:t.find(e=>"loc4"===e.name).value,cat1:p(a,"li:nth-child(1) > a > span"),cat2:p(a,"li:nth-child(2) > a > span"),Marka:p(a,"li:nth-child(3) > a > span"),Seri:p(a,"li:nth-child(4) > a > span"),Model:p(n,"ul > li:nth-child(5) > span"),subModel0:p(a,"li:nth-child(5) > a > span"),subModel1:p(a,"li:nth-child(6) > a > span"),subModel2:p(a,"li:nth-child(7) > a > span"),subModel3:p(a,"li:nth-child(8) > a > span"),agirHasar:t.find(e=>"Ağır Hasar Kayıtlı"===e.name).value},JSON.stringify(r,null,2)):void 0:void 0}catch{}}());n&&fetch(a+"/api/bs",{method:"POST",headers:{"Content-Type":"application/octet-stream"},body:f(m(n))}).then(e=>e.json()).then(e=>{}).catch(e=>{})}catch{}setTimeout(()=>{var t,r;t=document.querySelector("body"),r=0,new MutationObserver(function(e){e.forEach(function(e){"attributes"===e.type&&"class"===e.attributeName&&((e=t.className.includes("loading-80"))&&(r=1),!1===e)&&1===r&&(r=0,L())&&(browser.storage.local.get("buttonFiyatM2OnOff",function(e){e.buttonFiyatM2OnOff&&Ce()}),(e=he())&&fetch(a+"/apiv3/im",{method:"POST",headers:{"Content-Type":"application/octet-stream"},body:f(m(e))}).then(async e=>{e.ok;e=await e.arrayBuffer(),e=B(new Uint8Array(e));return JSON.parse(e)}).then(t=>{s=me(d=t),browser.storage.local.get("buttonHistoryChangeOnOff",function(e){(void 0===e.buttonHistoryChangeOnOff||e.buttonHistoryChangeOnOff)&&ye()}),browser.storage.local.get("buttonHistoryOnOff",function(e){(void 0===e.buttonHistoryOnOff||e.buttonHistoryOnOff)&&(ge(),pe(),document.body.insertAdjacentHTML("afterbegin",t.script_data),Array.from(document.querySelectorAll("."+u+".ignore-me.hidden")).forEach(e=>e.classList.remove("hidden")))})}).catch(e=>{}),(e=ve())&&fetch(a+"/api/bm",{method:"POST",headers:{"Content-Type":"application/octet-stream"},body:f(m(e))}).then(e=>e.json()).then(e=>{}).catch(e=>{}))})}).observe(t,{attributes:!0})},100)}}),browser.storage.local.get("uuid",function(e){F=e.uuid,u=(u=e.uuid).replace(/[^a-zA-Z]/g,"")});Math.random().toString(36).replace(/[^a-zA-Z]/g,"");function xe(o){function e(){return Math.random().toString(36).replace(/[^a-zA-Z]/g,"")}var t=document.createElement("div"),r=(t.className=e(),t.style.position="relative",document.createElement("div")),n=(r.className=e(),r.style.width="292px",r.style.border="1px solid #dbdbdb",r.style.padding="3px",r.style.color="#333",r.style.marginBottom="12px",document.createElement("div")),a=(n.className=e(),n.style.overflow="auto",document.createElement("table")),i=(a.style.width="100%",document.createElement("thead")),l=(i.className=e(),i.style.backgroundColor="#efefef",i.style.background="-webkit-linear-gradient(top, #ddd 0, #eee 100%)",e()),c=document.createElement("style"),c=(c.innerHTML="."+l+" {padding: 6px;font-weight: bold;}",document.head.appendChild(c),document.createElement("tr")),d=(c.innerHTML="<th class='"+l+"'>Fiyat</th><th class='"+l+"'>Tarih</th>",i.appendChild(c),a.appendChild(i),document.createElement("tbody")),s=null;return o.data.forEach((e,t)=>{var r,n,a,i,l;null!==s&&parseFloat(e.price)===s||(r=document.createElement("tr"),l=parseFloat(e.price).toLocaleString("tr-TR",{minimumFractionDigits:0,maximumFractionDigits:2}),n=new Date(e.date).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"}),l=!(0<t&&void 0!==o.data[t-1].price)||(a=parseFloat(o.data[t-1].price))===(i=parseFloat(e.price))?"<span style='color: "+(t%2==1?"#f5f5f5":"#efefef")+";'>↕</span> "+l:i<a?"<span style='color: #ff00006e;'>↓</span> "+l:"<span style='color: #0080006e;'>↑</span> "+l,r.style.backgroundColor=t%2==1?"#f5f5f5":"#efefef",r.innerHTML+="<td style='padding: 3px; text-align: center'>"+l+" TL</td><td style='padding: 2px; text-align: center'>"+n+"</td>",d.appendChild(r),s=parseFloat(e.price))}),0==o.data.length&&((l=document.createElement("tr")).innerHTML="<td style='padding: 4px 1px; text-align: center; border-left: 1px solid #fff; white-space: nowrap;' colspan=\"2\">Fiyat geçmişi mevcut değil</td>",l.style.backgroundColor="#efefef",d.appendChild(l)),a.appendChild(d),n.appendChild(a),r.appendChild(n),t.appendChild(r),t}function Ce(){setTimeout(()=>{let n=document.querySelector("#searchResultsTable"),t=n.querySelector("thead tr"),a=Array.from(n.querySelectorAll(".searchResultsItem:not(.searchResultsPromoSuper):not(.nativeAd)")),i=Array.from(t.children).findIndex(e=>"m² (Brüt)"===e.textContent.trim()),l=Array.from(t.children).findIndex(e=>"Fiyat"===e.textContent.trim());if(-1!==i&&-1!==l){let e=document.createElement("td"),r=(e.textContent="m² Fiyatı",t.insertBefore(e,t.children[i+1]),a.forEach(e=>{var t=e.children[i],r=e.children[l];t&&r&&(t=parseFloat(t.textContent.trim().replace(/\./g,"").replace("m²","").replace(" ","").replace(",",".")),r=r.querySelector("span").textContent.trim().replace(/\./g,"").replace("TL","").replace(" ","").replace(",","."),r=parseFloat(r),!isNaN(t)&&!isNaN(r)&&0<t?(r=(r/t).toFixed(0).toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."),(t=document.createElement("td")).textContent=r+" TL",e.insertBefore(t,e.children[i+1])):((r=document.createElement("td")).textContent="N/A",e.insertBefore(r,e.children[i+1])))}),1);e.style.cursor="pointer",e.style.minWidth="58px",e.addEventListener("click",function(){document.querySelectorAll(".classicNativeAd").forEach(e=>{e.style.display="none"});var e=a.sort((e,t)=>{var e=e.children[i+1],t=t.children[i+1];return e&&t?(e=parseFloat(e.textContent.replace(" TL/m²","").replace(/\./g,"")),t=parseFloat(t.textContent.replace(" TL/m²","").replace(/\./g,"")),r*(e-t)):0});r*=-1;let t=n.querySelector("tbody");e.forEach(e=>t.appendChild(e))})}},0)}