var o="https://gecmisi.xyz:3000";document.addEventListener("DOMContentLoaded",function(){try{document.getElementById("submitButton").addEventListener("click",function(){var e=document.getElementById("feedbackMessage").value,t=((/^https:\/\/www\.sahibinden\.com\//.test(e)||/^https:\/\/shbd\.io\//.test(e))&&window.open(e,"_blank"),{message:e.replace(/[^a-zA-Z0-9ğüşıöçĞÜŞİÖÇ ]/g,""),version:browser.runtime.getManifest().version});e.length<2||fetch(o+"/api/feedback",{method:"POST",headers:{"Content-Type":"application/octet-stream"},body:JSON.stringify({feedback:t})}).then(e=>(e.ok,e.json())).then(e=>{"ok"===e.message?document.getElementById("feedbackForm").innerHTML="<p>Geri bildiriminiz başarıyla gönderildi. Teşekkür ederiz!</p>":document.getElementById("feedbackForm").innerHTML="<p style='color: red;'>Geri bildiriminiz gönderilemedi. Lütfen tekrar deneyin.</p>"}).catch(e=>{document.getElementById("feedbackForm").innerHTML="<p style='color: red;'>Geri bildiriminiz gönderilemedi. Lütfen daha sonra tekrar deneyin.</p>"})})}catch{}try{var e=browser.runtime.getManifest().version;document.getElementById("version-info").textContent="versiyon "+e}catch{}try{document.getElementById("triggerButton").addEventListener("click",function(){browser.storage.local.set({buttonHowItWorks:!0}),browser.tabs.create({url:"https://www.sahibinden.com/otomobil?pagingSize=50"},function(e){})})}catch{}function n(){browser.tabs.query({active:!0,currentWindow:!0},function(e){e[0]&&browser.tabs.sendMessage(e[0].id,{action:"reloadPage"})})}try{let t=document.getElementById("toggleHistory");browser.storage.local.get("buttonHistoryOnOff",function(e){t.checked=e.buttonHistoryOnOff||!1}),t.addEventListener("change",function(){var e=t.checked;browser.storage.local.set({buttonHistoryOnOff:e}),n()})}catch{}try{let t=document.getElementById("toggleHistoryChange");browser.storage.local.get("buttonHistoryChangeOnOff",function(e){t.checked=e.buttonHistoryChangeOnOff||!1}),t.addEventListener("change",function(){var e=t.checked;browser.storage.local.set({buttonHistoryChangeOnOff:e}),n()})}catch{}try{let t=document.getElementById("toggleFiyatM2Change");browser.storage.local.get("buttonFiyatM2OnOff",function(e){t.checked=e.buttonFiyatM2OnOff||!1}),t.addEventListener("change",function(){var e=t.checked;browser.storage.local.set({buttonFiyatM2OnOff:e}),n()})}catch{}fetch(o+"/api/popuptext").then(e=>e.text()).then(e=>{document.getElementById("content_api_message").innerHTML=e}).catch(e=>{})});